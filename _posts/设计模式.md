# 设计模式

 - 自增型函数
 - 闭包

## 简单的单例模式
透明的单例模式
用代理实现的单例模式

 - JS中的单例模式

 - 惰性单例

        只有在需要的时候才创建对象实例。惰性单例是单例模式的重点。


优点：

        遵循单一职责原则，让创建对象和管理单例的逻辑分离开
        让创建单例的函数可复用

## 策略模式

        定义一系列算法，把他们一个个封装起来，并且使它们可以相互替换。

 - 缺点

        函数比较庞大，包含很多if
        缺乏弹性想增加一个等级‘SSS’，或者调整奖金系数，必须深入函数修改，违反了开放-封闭原则
        算法的复用性差，如果想复用计算奖金的算法，只能复制粘贴

 - 使用策略模式重构代码

第一部分是一组策略类，封装了具体的算法
第二部分是环境类context，context接受客户的请求，然后把请求委托给某一个策略类。

        // 一组策略类
        let performanceS = function(){}
        performanceS.prototype.compute = function(salary){
            return salary*4
        }
        let performanceA = function(){}
        performanceA.prototype.compute = function(salary){
            return salary*3
        }
        let performanceB = function(){}
        performanceB.prototype.compute = function(salary){
            return salary*2
        }
        let performanceC = function(){}
        performanceC.prototype.compute = function(salary){
            return salary*1
        }
        // 环境类
        let bonus = function(){
            this.salary = null;
            this.strategy = null;
        }

        Bonus.prototype.setSalary = function(salary){
            this.salary = salary;
        }
        Bonus.prototype.setStrategy = function(strategy){
            this.stragtegy = strategy;
        }
        Bonus.prototype.getBonus = function(){
            return this.stragtegy.compute(this.salary)
        }

        let bonus = new Bonus();
        bonus.setSalary(10000);
        bonus.setStrategy(new performanceB());
        bonus.getBonus();


 - JS版本的策略模式

 
        let strategy = {
            'S' : function(salary){
                return salary * 4
            },
            'A' : function(salary){
                return salary * 3
            },
            'B' : function(salary){
                return salary * 2
            },
            'C' : function(salary){
                return salary * 1
            },
        }

        let computBonus = function (level,salary) {
            return strategy[level](salary);
        }

[更多设计模式][1]

[1]: http://www.alloyteam.com/2012/10/common-javascript-design-patterns/